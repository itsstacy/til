트러블 슈팅

리덕스 useSelector로 state를 받아오는데, 같은 state가 여러 번 콜 되는 현상과 slick 슬라이더 내에 같은 리스트가 여러번 반복되어 나오는 현상

**에러가 발생한 시점의 상태**
- useSelector로 가져와서 destrcuting을 할 때 문제가 발생, 리스트에 map을 돌리면 item이 2개이면 2개만 나와야 하는데 (1st,2nd,1st,2nd) 4개가 뷰에 나타나는 현상이 발생 (map이 두번 돌아감)

**해결 과정**
멘토님이 알려주신 레퍼런스를 이용해 state의 re-render 작동원리를 파악

- 콘솔에 리스트가 여러번 찍힌 이유
    - 먼저, 콘솔에 리스트가 여러번 찍히는 건 useEffect 안에 있는 state 변경 함수로 인해 발생한 문제였다.
    - useEffect 안에 setLoading (state변경 함수) 가 2번 들어갔고 콘솔에 리스트가 3번 뜨는 현상이 있었는데, setLoading 함수를 지우니까 한번만 작동했다.
    - 콘솔이 여러번 찍히는 이유를 정확히 파악했으나 문제를 여전히 해결하지 못했다.
- 그런데 이상하게도 슬라이더 내에 들어가는 item 수가 “slidesToShow” 숫자보다 작을 때만 이러한 문제가 발생한 것을 알아냈다. 문제의 패턴을 이해하지 못하고 전혀 다른 곳에서 해결하려 했던 것이다.
- 그러니까 문제는 Slick 슬라이더의 작동법 때문이었던 것이다.
    - 문제를 파악한 방법: item이 3개일 때, “slidesToShow”를 3으로 설정해봤더니 정상적으로 작동된 것을 확인했다.
    - 이 슬라이더의 특징은, “slidesToShow”로 설정한 숫자보다 가져온 리스트의 아이템이 적으면 slides를 채우기 위해 리스트를 반복하는 행동을 하는 버그가 있었던 것이다.

**해결 방법**

- 리스트의 길이를 구해서 slidesToShow 값보다 작으면 slider로 보여주지 않고 slidesToShow 이상이면 슬라이더로 보여주는 방법으로 구현했다.

**배운 점**

- useSelector를 쓸 때, 가져오는 해당 state만 변경되지 않으면 re-render가 일어나지 않을 거라고 넘겨짚었지만, 실제로 state가 변경되는 모든 시점에서 re-render가 일어났다.

